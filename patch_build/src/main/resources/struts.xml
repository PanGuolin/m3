<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">
	
<struts>
	<constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
	<package name="patchbuild" extends="struts-default">
	    <global-results>
	        <result name="login">/user/login.jsp</result>
	    </global-results>
	</package>
	<package name="user" extends="patchbuild" namespace="/user">
		<action name="login" class="com.m3.patchbuild.user.action.LoginAction">
			<result name="error">/user/login.jsp</result>
			<result name="success" type="redirect">/msg/mymsg.jsp</result>
		</action>
		
		<action name="logout" class="com.m3.patchbuild.user.action.LogoutAction">
		</action>
		
		<action name="importFromSvn" class="com.m3.patchbuild.user.action.ImportUserFromSVN">
			<result name="error">/user/importfromsvn.jsp</result>
			<result name="success">/user/myfp.jsp</result>
		</action>
	</package>
	<package name="pack" extends="patchbuild" namespace="/pack">
		<action name="addBuild" class="com.m3.patchbuild.pack.action.AddBuildAction">
			<result name="success" type="redirect">/msg/mymsg.jsp</result>
			<result name="next" >/pack/addbuild.jsp</result>
			<result name="error">/pack/addbuild.jsp</result>
		</action>
		<action name="handle" class="com.m3.patchbuild.pack.action.HandlePackAction">
		    <result name="buildfail">/pack/buildfail.jsp</result>
		    <result name="check">/pack/check.jsp</result>
		</action>
		<action name="viewf" class="com.m3.patchbuild.pack.action.ViewPackFileAction">
	     	<result name="success">/pack/viewfile.jsp</result>
		</action>
	</package>
	<package name="json" extends="json-default" namespace="/js">
        <action name="fnmsg" class="com.m3.patchbuild.message.action.FetchMessageAction">
            <result type="json">
                <param name="root">dataMap</param>
            </result>
        </action>
        <action name="handle" class="com.m3.patchbuild.message.action.HandleMessageAction">
   			<result name="next" type="redirectAction">
   			    <param name="namespace">${ns}</param>  
            	<param name="actionName">${nextAction}</param>  
            	<param name="bussId">${bussId}</param>
            	<param name="checkId">${checkId}</param>
   			</result>
		</action>
		<action name="viewf" class="com.m3.patchbuild.pack.action.ViewPackFileAction">
	     	<result type="json">
               <param name="root">dataMap</param>
         	</result>
		</action>
	</package>
</struts>